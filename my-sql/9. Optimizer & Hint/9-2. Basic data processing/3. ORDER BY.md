## Order by 처리
- 정렬을 처리하는 방법은 인덱스를 이용하는 방법과 쿼리가 실행될 때 "Filesort"라는 별도의 처리를 이용하는 방법으로 나눌 수 있다.  

||인덱스 이용|Filesort이용|  
|---|---|---|  
|장점|INSERT, UPDATE, DELETE 쿼리가 실행 될 때 이미 인덱스가 정렬돼 있어 순서대로 읽기만 하면 되므로 매우 빠르다 |인덱스를 생성하지 않아도 되므로 인덱스를 이용할 때의 단점이 장점으로 바뀜.  정렬해야 할 레코드가 많지 않으면 메모리에서 Filesort가 처리되므로 충분히 빠르다|  
|단점|INSERT, UPDATE, DELETE 작업 시 부가적인 인덱스 추가/삭제 작업이 필요하므로 느리다. 인덱스 때문에 디스크 공간이 더 많이 필요하다. 인덱스의 개수가 늘어날수록 InnoDB의 버퍼 풀을 위한 메모리가 많이 필요하다| 정렬 작업이 쿼리 실행 시 처리되므로 레코드 대상건수가 많아질수록 쿼리의 응답 속도가 느리다|

>모든 정렬을 인덱스를 이용하도록 튜능하기가 힘든 이유
> - 정렬 기준이 너무 많아서 요건별로 모두 인덱스를 생성하는 것이 불가능한 경우
> - GROUP BY의 결과 또는 DISTINCT 같은 처리의 결과를 정렬해야 하는 경우
> - UNION의 결과와 같이 임시 테이블의 결과를 다시 정렬해야 하는 경우
> - 랜덤하게 결과 레코드를 가져와야 하는 경우

- MySQL 서버에서 실행 계획의 `Extra`컬럼에 `Using filesor`메세지가 표시되는지의 여부로 인덱스를 사용하지 않고 별도의 정렬 처리를 수행했는지 알 수 있다.

### 소트 버퍼
- 정렬을 수행하기 위해 별도의 할당받은 메모리 공간
- 정렬이 필요한 경우에만 할당됨.
- 버퍼의 크기는 정렬해야 할 레코드의 크기에 따라 가변적으로 증가하지만 `sort_buffer_size` 변수로 최대 사용 가능한 소트 버퍼의 공간을 설정할 수 있음.
- 메모리 공간은 쿼리의 실행이 완료되면 즉시 시스템으로 반납됨.